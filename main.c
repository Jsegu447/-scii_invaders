/*	Author: jsegu010
 *  Partner(s) Name: 
 *	Lab Section:
 *	Assignment: Lab #  Exercise #
 *	Exercise Description: [optional - include for your own benefit]
 *
 
 https://youtu.be/Q7RuQu2hal0
 
 
 *	I acknowledge all content contained herein, excluding template or example
 *	code, is my own original work.
 */
#include <avr/io.h>
#include <timer.h>
#include <Nokia5110.h>
#ifdef _SIMULATE_
#include "simAVRHeader.h"
#endif
//50ms period
void ADC_init(){
	ADCSRA |= (1 << ADEN) | (1<<ADSC)|(1<<ADATE);
}
const unsigned char TITLE [] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x30, 0xD8, 0x28, 0x28,
0xE8, 0x08, 0x10, 0xE0, 0x00, 0x30, 0x48, 0x88, 0x08, 0x00, 0xE0, 0x10, 0x08, 0x08, 0x08, 0x00,
0x00, 0xF8, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03,
0x04, 0x0B, 0x0A, 0x0A, 0x0B, 0x02, 0x02, 0x01, 0x00, 0x04, 0x04, 0x04, 0x03, 0x00, 0x01, 0x02,
0x04, 0x04, 0x04, 0x00, 0x00, 0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF, 0x02, 0x0C,
0x30, 0x40, 0xFF, 0x00, 0x03, 0x1C, 0x60, 0x60, 0x1C, 0x03, 0x00, 0xC0, 0x30, 0x2E, 0x21, 0x2E,
0x30, 0xC0, 0x00, 0xFF, 0x81, 0x81, 0x81, 0x42, 0x3C, 0x00, 0xFF, 0x89, 0x89, 0x89, 0x00, 0x00,
0xFF, 0x11, 0x11, 0x71, 0x8E, 0x00, 0x86, 0x89, 0x91, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0xFF, 0x11, 0x11, 0x11, 0x0E, 0x00, 0xFC, 0x04, 0x00, 0x78, 0xD4, 0x94,
0x94, 0x94, 0x98, 0x00, 0x9C, 0xA4, 0xE4, 0x00, 0x9C, 0xA4, 0xE4, 0x00, 0x00, 0x00, 0x00, 0x86,
0x89, 0x91, 0x61, 0x04, 0xFF, 0x84, 0x00, 0xE0, 0x94, 0x94, 0xFC, 0x00, 0xFC, 0x04, 0x00, 0x04,
0xFF, 0x84, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

const unsigned char LOSS [] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x06, 0x1E, 0xFC, 0xF8, 0xFC, 0x1E, 0x0E, 0x02, 0x00, 0xFC, 0xFE, 0xCE, 0x86, 0x86, 0xFE,
0xFC, 0x78, 0x00, 0xFE, 0xFE, 0xC0, 0x80, 0x80, 0xFE, 0xFE, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x7E, 0xFF, 0xE7, 0xC3,
0xC3, 0xFF, 0x7E, 0x3C, 0x00, 0x4E, 0xDF, 0xDF, 0xDB, 0xDB, 0xFB, 0x7A, 0x20, 0x00, 0x03, 0x03,
0xFF, 0xFF, 0xFF, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0xDF, 0xDF, 0xDF, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

const unsigned char WOON [] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x06, 0x1E, 0xFC, 0xF8, 0xFC, 0x1E, 0x0E, 0x02, 0x00, 0xFC, 0xFE, 0xCE, 0x86, 0x86, 0xFE,
0xFC, 0x78, 0x00, 0xFE, 0xFE, 0xC0, 0x80, 0x80, 0xFE, 0xFE, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x81, 0xC1, 0xC1, 0x00, 0x80, 0xC0, 0xC0, 0xC0, 0xC1,
0xC1, 0x81, 0x01, 0x01, 0xC0, 0xC0, 0xC0, 0x00, 0x01, 0xC1, 0xC1, 0x01, 0x01, 0x00, 0x00, 0xC0,
0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x3F, 0x3E, 0x0F, 0x1F, 0x3F, 0x3F, 0x0F, 0x00, 0x1F,
0x3F, 0x3F, 0x30, 0x30, 0x3F, 0x1F, 0x0F, 0x00, 0x3F, 0x3F, 0x3F, 0x0F, 0x1E, 0x3F, 0x3F, 0x00,
0x00, 0x00, 0x00, 0x37, 0x37, 0x37, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};


const unsigned char PAUSES [] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0xFE, 0x66, 0x66, 0x7E, 0x7E,
0x3C, 0x00, 0xE0, 0xFC, 0xFE, 0xCE, 0xFE, 0xFE, 0xF0, 0x80, 0x00, 0xFE, 0xFE, 0xC0, 0x80, 0x80,
0xFE, 0xFE, 0x7E, 0x00, 0x9C, 0xBE, 0xBE, 0xB6, 0xB6, 0xF6, 0xF4, 0x40, 0x00, 0xFE, 0xFE, 0xFE,
0xB6, 0xB6, 0xB6, 0xB6, 0x00, 0x00, 0xFE, 0xFE, 0xFE, 0x86, 0x86, 0xFE, 0xFC, 0x78, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01,
0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00,
0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

unsigned char lives = 0x07;
//enemy location array (max 7 enemies);
unsigned char isLost = 0;
signed char enemyX[7];
signed char enemyY[7];
unsigned char enemyS[7];
//array2
signed char enemyX2[7];
signed char enemyY2[7];
unsigned char enemyS2[7];

//end
unsigned char totBoard = 1;
unsigned char enTick = 0;
void enemyUpdate(){
	unsigned char i;
	for(i = 0; i < totBoard; i++){
		if(enemyX[i] != -1){
		unsigned char temp1 = (0x80 | enemyX[i]);
		unsigned char temp2 = (0x40 | enemyY[i]);
		wCom(temp1);
		wCom(temp2);
		wData(enemyS[i]);
		wData(enemyS[i]);
		wData(enemyS[i]);
		}
		if(enemyY[i] == 6 && (enemyX!= -1 && enemyY != -1)){
			enemyY[i] = -1;
			enemyX[i] = -1;
			if(lives > 0){
				lives = (lives >> 1);
			}
			if(lives == 0){
				isLost = 1;
			}
		}
		if(enemyS[i] == 0){
		enemyS[i] = 0x07;
		enemyY[i]++;
		}
		enemyS[i] = (enemyS[i] << 1);
	}	
	enTick++;
	if(enTick == 3){
		if(totBoard < 7){
			totBoard++;
		}
	enTick = 0;
	}
}

void enemyUpdate2(){
	unsigned char i;
	for(i = 0; i < 7; i++){
		if(enemyX2[i] != -1){
		unsigned char temp1 = (0x80 | enemyX2[i]);
		unsigned char temp2 = (0x40 | enemyY2[i]);
		wCom(temp1);
		wCom(temp2);
		wData(enemyS2[i]);
		wData(enemyS2[i]);
		wData(enemyS2[i]);
		}
		if(enemyY2[i] == 6 && (enemyX2!= -1 && enemyY2 != -1)){
			enemyY2[i] = -1;
			enemyX2[i] = -1;
			if(lives > 0){
				lives = (lives >> 1);
			}
			if(lives == 0){
				isLost = 1;
			}
		}
		if(enemyS2[i] == 0){
		enemyS2[i] = 0x07;
		enemyY2[i]++;
		}
		enemyS2[i] = (enemyS2[i] << 1);
	}	
}
unsigned char won = 0;
void isWin(){
	unsigned char i;

	for(i = 0; i < 7; i++){
		if(enemyX[i] != -1){
			return;
		}
	}
	won = 1;
}
unsigned char won2 = 0;
void isWin2(){
	unsigned char i;
	for(i = 0; i < 7; i++){
		if(enemyX2[i] != -1){
			return;
		}
	}
	won2 = 1;
}
//player start loc
//signed char locX = 41;
//signed char locY = 5;

//2player

//player1
signed char p1LocX = 28;
signed char p1LocY = 5;

//player2
signed char p2LocX = 56;
signed char p2LocY = 5;

//Players prj Loc
signed char pr1LocX = 28;
signed char pr1LocY = 4;
signed char pr2LocX = 56;
signed char pr2LocY = 4;
unsigned char proj1St = 0xE0;
unsigned char proj2St = 0xE0;
unsigned char existP1 = 0;
unsigned char existP2 = 0;

void updateProj1(){
	if(existP1 == 0x01){
		unsigned char temp1 = (0x80 | pr1LocX);
		unsigned char temp2 = (0x40 | pr1LocY);
		wCom(temp1);
		wCom(temp2);
		wData(proj1St);
		wData(proj1St);
		wData(proj1St);
		if(pr1LocY != 0 && proj1St == 0x03){
		unsigned char temp3 = ((0x40 | pr1LocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0x80);
		wData(0x80);
		wData(0x80);
		}

		if(pr1LocY != 0 && proj1St == 0x01){
		unsigned char temp3 = ((0x40 | pr1LocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0xC0);
		wData(0xC0);
		wData(0xC0);
		}
		
		if(proj1St == 0x00){	
			wCom(temp1);
			wCom(temp2);
			wData(0);
			wData(0);
			wData(0);
			proj1St = 0xE0;
			pr1LocY--;
			
		}
		if(pr1LocY < 0){
			existP1 = 0;
			pr1LocY = 4;
			proj1St = 0xE0;
		}
		proj1St = (proj1St >> 1);
	}
				
		
}

void updateProj2(){
	if(existP2 == 0x01){
		unsigned char temp1 = (0x80 | pr2LocX);
		unsigned char temp2 = (0x40 | pr2LocY);
		wCom(temp1);
		wCom(temp2);
		wData(proj2St);
		wData(proj2St);
		wData(proj2St);
		if(pr2LocY != 0 && proj2St == 0x03){
		unsigned char temp3 = ((0x40 | pr2LocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0x80);
		wData(0x80);
		wData(0x80);
		}

		if(pr2LocY != 0 && proj2St == 0x01){
		unsigned char temp3 = ((0x40 | pr2LocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0xC0);
		wData(0xC0);
		wData(0xC0);
		}
		
		if(proj2St == 0x00){	
			wCom(temp1);
			wCom(temp2);
			wData(0);
			wData(0);
			wData(0);
			proj2St = 0xE0;
			pr2LocY--;
			
		}
		if(pr2LocY < 0){
			existP2 = 0;
			pr2LocY = 4;
			proj2St = 0xE0;
		}
		proj2St = (proj2St >> 1);
	}
				
		
}
/*
//projectile location
signed char plocX = 41;
signed char plocY = 4;
unsigned char projSt = 0xE0;
unsigned char existP = 0;
void updateProj(){
	if(existP == 0x01){
		unsigned char temp1 = (0x80 | plocX);
		unsigned char temp2 = (0x40 | plocY);
		wCom(temp1);
		wCom(temp2);
		wData(projSt);
		wData(projSt);
		wData(projSt);
		if(plocY != 0 && projSt == 0x03){
		unsigned char temp3 = ((0x40 | plocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0x80);
		wData(0x80);
		wData(0x80);
		}

		if(plocY != 0 && projSt == 0x01){
		unsigned char temp3 = ((0x40 | plocY-1));
		wCom(temp1);
		wCom(temp3);
		wData(0xC0);
		wData(0xC0);
		wData(0xC0);
		}
		
		if(projSt == 0x00){	
			wCom(temp1);
			wCom(temp2);
			wData(0);
			wData(0);
			wData(0);
			projSt = 0xE0;
			plocY--;
			
		}
		if(plocY < 0){
			existP = 0;
			plocY = 4;
			projSt = 0xE0;
		}
		projSt = (projSt >> 1);
	}
				
		
}
*/

void updateLoc1(){
	ADMUX = 0x03;
	unsigned short x = ADC;
	if(x < 0x0200){
		if(p1LocX < 80){
			p1LocX++;
		}		
	}
	else if(x > 0x0280){
		if(p1LocX > 1){
			p1LocX--;
		}
	}
}

void updateLoc2(){
	ADMUX = 0x00;
	unsigned short x = ADC;
	if(x < 0x0200){
		if(p2LocX < 80){
			p2LocX++;
		}		
	}
	else if(x > 0x0280){
		if(p2LocX > 1){
			p2LocX--;
		}
	}
}

/*
void updateLoc(){
	unsigned short x = ADC;
	if(x < 0x0200){
		if(locX < 80){
			locX++;
		}		
	}
	else if(x > 0x0280){
		if(locX > 1){
			locX--;
		}
	}
}
*/
enum STS {ST,ON} lsSt;
void lossScrn(){
	unsigned short i;
	switch(lsSt){

		case ST:
		blankScrn();
		wCom(0x0C);
		for(i = 0; i < 504; i++){
			wData(LOSS[i]);
		}
		lsSt = ON;
		break;

		case ON:
		break;

		default:
		lsSt = ST;
		break;
	}
}

enum ST {S,ON2} wnSt;
void wonScrn(){
	unsigned short i;
	switch(wnSt){

		case S:
		blankScrn();
		wCom(0x0C);
		for(i = 0; i < 504; i++){
			wData(WOON[i]);
		}
		wnSt = ON2;
		break;

		case ON2:
		break;

		default:
		wnSt = S;
		break;
	}
}

enum pSTATE{STAA,ON3} pState;
void pauseScrn(){
	unsigned short i;
	switch(pState){

		case STAA:
		blankScrn();
		wCom(0x0C);
		for(i = 0; i < 504; i++){
			wData(PAUSES[i]);
		}
		pState = ON3;
		break;

		case ON3:
		break;

		default:
		pState = STAA;
		break;
	}
}
enum STATES{START, BLK,WHTE} state;
unsigned short sb1 = 0;
	void MenuTick(){
	unsigned short i;
	switch(state){

		case START:
		blankScrn();
		for(i = 0; i < 504; i++){
			wData(TITLE[i]);
		}
		state = BLK;
		break;

		case BLK:
		wCom(0x0C);
		if(sb1 == 19){
		state = WHTE;
		sb1 = 0;
		break;
		}
		sb1++;
		break;
		
		case WHTE:
		wCom(0x0D);
		if(sb1 == 19){
		state = BLK;
		sb1 = 0;
		break;
		}
		sb1++;
		break;

		default:
		state = START;
		break;

	}
	}

//reference varibles
/*
signed char enemyX[5];
signed char enemyY[5];
unsigned char enemyS[5];
unsigned char plocX = 41;
signed char plocY = 4;
unsigned char projSt = 0xE0;
unsigned char existP = 0;
*/
void collisionDetect(){
	unsigned char i;
	for(i = 0; i < 7; i++){
		if((enemyY[i] == pr1LocY && existP1)){
			if( ((pr1LocX >= enemyX[i]) && (enemyX[i] >= pr1LocX - 2)) || ((pr1LocX <= enemyX[i]) && (enemyX[i] <= pr1LocX + 2)) ){
				unsigned char temp1 = (0x80 | enemyX[i]);
				unsigned char temp2 = (0x40 | enemyY[i]);
				wCom(temp1);
				wCom(temp2);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				enemyX[i] = -1;
				enemyY[i] = -1;
				unsigned char temp3 = (0x80 | pr1LocX);
				unsigned char temp4 = (0x40 | pr1LocY);
				wCom(temp3);
				wCom(temp4);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				existP1 = 0;
				pr1LocY = 4;
				proj1St = 0xE0;

			}
		}

		else if((enemyY[i] == pr2LocY && existP2)){
			if( ((pr2LocX >= enemyX[i]) && (enemyX[i] >= pr2LocX - 2)) || ((pr2LocX <= enemyX[i]) && (enemyX[i] <= pr2LocX + 2)) ){
				unsigned char temp1 = (0x80 | enemyX[i]);
				unsigned char temp2 = (0x40 | enemyY[i]);
				wCom(temp1);
				wCom(temp2);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				enemyX[i] = -1;
				enemyY[i] = -1;
				unsigned char temp3 = (0x80 | pr2LocX);
				unsigned char temp4 = (0x40 | pr2LocY);
				wCom(temp3);
				wCom(temp4);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				existP2 = 0;
				pr2LocY = 4;
				proj2St = 0xE0;

			}
		}
	}
}


void collisionDetect2(){
	unsigned char i;
	for(i = 0; i < 7; i++){
		if((enemyY2[i] == pr1LocY && existP1 && won == 1)){
			if( ((pr1LocX >= enemyX2[i]) && (enemyX2[i] >= pr1LocX - 2)) || ((pr1LocX <= enemyX2[i]) && (enemyX2[i] <= pr1LocX + 2)) ){
				unsigned char temp1 = (0x80 | enemyX2[i]);
				unsigned char temp2 = (0x40 | enemyY2[i]);
				wCom(temp1);
				wCom(temp2);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				enemyX2[i] = -1;
				enemyY2[i] = -1;
				unsigned char temp3 = (0x80 | pr1LocX);
				unsigned char temp4 = (0x40 | pr1LocY);
				wCom(temp3);
				wCom(temp4);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				existP1 = 0;
				pr1LocY = 4;
				proj1St = 0xE0;

			}
		}

		else if((enemyY2[i] == pr2LocY && existP2 && won == 1)){
			if( ((pr2LocX >= enemyX2[i]) && (enemyX2[i] >= pr2LocX - 2)) || ((pr2LocX <= enemyX2[i]) && (enemyX2[i] <= pr2LocX + 2)) ){
				unsigned char temp1 = (0x80 | enemyX2[i]);
				unsigned char temp2 = (0x40 | enemyY2[i]);
				wCom(temp1);
				wCom(temp2);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				enemyX2[i] = -1;
				enemyY2[i] = -1;
				unsigned char temp3 = (0x80 | pr2LocX);
				unsigned char temp4 = (0x40 | pr2LocY);
				wCom(temp3);
				wCom(temp4);
				wData(0x00);
				wData(0x00);
				wData(0x00);
				existP2 = 0;
				pr2LocY = 4;
				proj2St = 0xE0;

			}
		}
	}
}



unsigned short eTick = 0;
enum GAMESTATE{MENU,MENP,PLAY,LOST, WON,WAITRP1,REL1,PUSHED} st1;
void gameTick(){
unsigned char i;
unsigned char j;
	switch(st1){
		case MENU:
		MenuTick();
		if((~PINA & 0x02) == 0x02){
		st1 = MENP;
		blankScrn();
		state = START;
		}
		break;
		
		case MENP:
		MenuTick();
		if((~PINA & 0x02) == 0x00){
		st1 = PLAY;
		blankScrn();
		}
		break;
		
		case PLAY:
		if((~PINA & 0x02) == 0x02){
			st1 = WAITRP1;
		}
		wCom(0x0C);
		
		//erase old location then update location
		unsigned char temp1 = (0x80 | p1LocX);
		unsigned char temp2 = (0x40 | p1LocY);
		wCom(temp1);
		wCom(temp2);
		wData(0x00);
		wData(0x00);
		wData(0x00);
		updateLoc1();

		unsigned char tempA = (0x80 | p2LocX);
		unsigned char tempB = (0x40 | p2LocY);
		wCom(tempA);
		wCom(tempB);
		wData(0x00);
		wData(0x00);
		wData(0x00);
		updateLoc2();

		//print new location
		temp1 = (0x80 | p1LocX);
		temp2 = (0x40 | p1LocY);
		wCom(temp1);
		wCom(temp2);
		wData(0xF0);
		wData(0x50);
		wData(0xF0);

		tempA = (0x80 | p2LocX);
		tempB = (0x40 | p2LocY);
		wCom(tempA);
		wCom(tempB);
		wData(0xF0);
		wData(0xA0);
		wData(0xE0);

		//detect shooting
		if((~PINA & 0x04) == 0x04 && (!existP1)){
		existP1 = 1;
		pr1LocX = p1LocX;
		}

		
		if((~PINA & 0x10) == 0x10 && (!existP2)){
		existP2 = 1;
		pr2LocX = p2LocX;
		}

		//print enemy
		if(eTick == 7){
		if(won == 0){
		enemyUpdate();

		}
		else{
			enemyUpdate2();

		}
		eTick = 0;
		}

		//print projectile location.
		updateProj1();
		updateProj2();
		eTick++;
		collisionDetect();
		collisionDetect2();
		isWin();
		isWin2();
		/* 1 player
		//erase old location then update location
		unsigned char temp1 = (0x80 | locX);
		unsigned char temp2 = (0x40 | locY);
		wCom(temp1);
		wCom(temp2);
		wData(0x00);
		wData(0x00);
		wData(0x00);
		updateLoc();
		
		//print new location
		temp1 = (0x80 | locX);
		temp2 = (0x40 | locY);
		wCom(temp1);
		wCom(temp2);
		wData(0xF0);
		wData(0xF0);
		wData(0xF0);
			
		//detect shooting
		if((~PINA & 0x04) == 0x04 && (!existP)){
		existP = 1;
		plocX = locX;
		}

		//print enemy
		if(eTick == 10){
		enemyUpdate();
		eTick = 0;
		}
		
		
		
		//print projectile location.
		updateProj();
		eTick++;
		collisionDetect();

		*/
		if(isLost == 1){
			st1 = LOST;
		} 
		else if(won == 1 && won2 == 1){
			st1 = WON;
		}
		break;

		case LOST:
			lossScrn();
		break;

		case WON:
			wonScrn();
		break;
		//WAITRP1,REL1,PUSHED
		case WAITRP1:
			pauseScrn();
			if((~PINA & 0x02) == 0x00){
				st1 = REL1; 
			}
		break;

		case REL1:
			if((~PINA & 0x02) == 0x02){
				st1 = PUSHED; 
			}
		break;
		
		case PUSHED:
			if((~PINA & 0x02) == 0x00){
				st1 = PLAY; 
				pState = STAA;
				blankScrn();
			}
		break;
	
		default:
		st1 = MENU;
		break;

	}

}

void reset(){
eTick = 0;
st1 = MENU;
state = START;
sb1 = 0;
pState = STAA;
wnSt = S;
lsSt = ST;
//player1
p1LocX = 28;
p1LocY = 5;

//player2
p2LocX = 56;
p2LocY = 5;

//Players prj Loc
pr1LocX = 28;
pr1LocY = 4;
pr2LocX = 56;
pr2LocY = 4;
proj1St = 0xE0;
proj2St = 0xE0;
existP1 = 0;
existP2 = 0;

won = 0;
won2 = 0;

lives = 0x07;

isLost = 0;

totBoard = 1;
enTick = 0;

unsigned char o;
	for(o = 0; o < 7; o++){
	enemyX[o] = (o * 11)+1;
	enemyY[o] = 0;
	enemyS[o] = 0x07;

	enemyX2[o] = (o * 11)+1;
	enemyY2[o] = 0;
	enemyS2[o] = 0x07;
	}
}

int main(void) {
    /* Insert DDR and PORT initializations */
	DDRB = 0xFF;
	PORTB = 0x00;
	DDRD = 0xFF;
	PORTD = 0x00;
	DDRA = 0x00;
	PORTA = 0xFF;
	//DDRD = 0x00;
	//DDRD = 0xFF;
    /* Insert your solution below */
	Nok_init();
	ADC_init();
	
	unsigned char o;
	for(o = 0; o < 7; o++){
	enemyX[o] = (o * 11)+1;
	enemyY[o] = 0;
	enemyS[o] = 0x07;

	enemyX2[o] = (o * 11)+1;
	enemyY2[o] = 0;
	enemyS2[o] = 0x07;
	}
	wCom(0x80);
	wCom(0x40);

	TimerSet(50);
	TimerOn();
    while (1) {
	if((~PINA & 0x80) == 0x80){
		reset();
	}
	gameTick();
	PORTD = lives;
	while(!TimerFlag);
	TimerFlag = 0;
    }
    return 1;
}
